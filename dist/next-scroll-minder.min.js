!function(){var t=t||this,e=t.nx||require("next-js-core2"),s=e.Store||require("next-store"),o=e.dom&&e.dom.Event||require("next-dom-event"),r=t.document,i=e.DebounceThrouttle||require("next-debounce-throttle"),l=e.declare("nx.ScrollMinder",{properties:{url:{get:function(){return t.location.href}},scrollTop:{get:function(){return this._isNative?r.documentElement.scrollTop||r.body.scrollTop||0:this._scroller.getValues().top}}},statics:{_cache:{},_scroller:null,_manual:!1,_isNative:!1,STORE_KEY:"__NX_SCROLL_REMINDER_CACHE__",attach:function(s){var o=this._isNative=s===t,r=o?"attachNative":"attachSimulate";this._scroller=s,e.bindAll(["scrollToRestored","delayStore"],this),this.scrollToRestored(),this.attachEvents(),this._scrollRes=this[r]()},attachEvents:function(){this._loadRes=o.on(window,"load",this.scrollToRestored),this._hashchangeRes=o.on(window,"hashchange",this.scrollToRestored),this._popstateRes=o.on(window,"popstate",this.scrollToRestored),this._pageshowRes=o.on(window,"pageshow",this.scrollToRestored)},attachNative:function(){return o.on(t,"scroll",this.delayStore)},attachSimulate:function(){return this._scroller.on("scroll",this.delayStore)},scrollToRestored:function(t){var o=s.session,r=o[this.STORE_KEY],i=r?r[this.url]:0,l=e.isNumber(i)?i:t;l=l||0,this._manual=0!==l,this._scroller.scrollTo(0,l,!1)},delayStore:i.debounce(function(){this.store(this.scrollTop),this._manual=!1},100,l),store:function(t){if(!this._manual){var e={};this._cache[this.url]=t,e[this.STORE_KEY]=this._cache,s.session=e}},destroy:function(){this._scrollRes&&this._scrollRes.destroy(),this._loadRes.destroy(),this._hashchangeRes.destroy(),this._popstateRes.destroy(),this._pageshowRes.destroy()}}});"undefined"!=typeof module&&module.exports&&(module.exports=l)}();