!function(){var o=o||this,t=o.nx||require("next-js-core2"),e=t.dom&&t.dom.Event||require("next-dom-event"),s=o.document,l=t.DebounceThrouttle||require("next-debounce-throttle"),i=t.UrlStore||require("next-url-store"),r=t.declare("nx.ScrollMinder",{properties:{scrollTop:{get:function(){return this._isWindow?s.documentElement.scrollTop||s.body.scrollTop||0:this._scroller.getValues().top}}},statics:{_scroller:null,_manual:!1,_loaded:!1,_isWindow:!1,STORE_KEY:"__NX_SCROLL_REMINDER_CACHE__",init:function(){this._store=new i(this.STORE_KEY)},attach:function(e){var s=this._isWindow=e===o,l=s?"attachNative":"attachSimulate";this._scroller=e,t.binds(["globalLoaded","scrollToRestored","delayStore"],this),this.globalLoaded(),this.attachEvents(),this._scrollRes=this[l]()},attachEvents:function(){this._loadRes=e.on(window,"load",this.globalLoaded),this._hashchangeRes=e.on(window,"hashchange",this.globalLoaded),this._popstateRes=e.on(window,"popstate",this.globalLoaded),this._pageshowRes=e.on(window,"pageshow",this.globalLoaded)},attachNative:function(){return e.on(o,"scroll",this.delayStore)},attachSimulate:function(){return this._scroller.on("scroll",this.delayStore)},globalLoaded:function(){this.scrollToRestored(),this._loaded=!0},scrollToRestored:function(o){var e=this._store.session,s=e.scrollTop||0,l=t.isNumber(o)||0;s=s||l,this._manual=0!==s,this._scroller.scrollTo(0,s,!1)},delayStore:l.debounce(function(){var o=this;o.store(o.scrollTop),o._manual=!1},100),store:function(o){this._manual||(this._store.session={scrollTop:o})},destroy:function(){this._scrollRes&&this._scrollRes.destroy(),this._loadRes.destroy(),this._hashchangeRes.destroy(),this._popstateRes.destroy(),this._pageshowRes.destroy()}}});"undefined"!=typeof module&&module.exports&&(module.exports=r)}();